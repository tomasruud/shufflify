(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(n,e,t){n.exports=t(64)},64:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(12),u=t.n(i),o=t(6),c=t(7),l=t(30),s=Object(c.c)({token:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"SESSION_BOOTSTRAP_COMPLETE"===t?r.token:n},user:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"SESSION_BOOTSTRAP_COMPLETE"===t?r.user:n},loading:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"SESSION_BOOTSTRAP_COMPLETE"!==(arguments.length>1?arguments[1]:void 0).type&&n}}),f=Object(c.c)({path:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"ROUTER_NAVIGATE"===t?r.path:n},params:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"ROUTER_NAVIGATE"===t?r.params:n}}),m=Object(c.c)({message:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"MESSAGE_SET"===t?r:"MESSAGE_CLEAR"===t?null:n}}),d=t(9),h=Object(c.c)({loading:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(arguments.length>1?arguments[1]:void 0).type;return"TRACKS_LOAD_REQUEST"===e||"TRACKS_LOAD_SUCCESS"!==e&&n},byURI:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;if("TRACKS_LOAD_SUCCESS"===t){var a=r.tracks.reduce(function(n,e){return n[e.uri]=e,n},{});return Object(d.a)({},n,a)}return n},URIbyID:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;if("TRACKS_LOAD_SUCCESS"===t){var a=r.tracks.reduce(function(n,e){return e.id&&(n[e.id]=e.uri),n},{});return Object(d.a)({},n,a)}return n}}),p=t(17),b=Object(c.c)({loading:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(arguments.length>1?arguments[1]:void 0).type;return"PLAYLISTS_LOAD_REQUEST"===e||"PLAYLISTS_LOAD_SUCCESS"!==e&&n},byURI:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;if("PLAYLISTS_LOAD_SUCCESS"===t){var a=r.reduce(function(n,e){return n[e.uri]=e,n},{});return Object(d.a)({},n,a)}if("TRACKS_LOAD_SUCCESS"===t){var i=Object(d.a)({},n[r.playlistURI]);return i.tracks=r.tracks.map(function(n){return n.uri}),Object(d.a)({},n,Object(p.a)({},r.playlistURI,i))}return n},search:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"PLAYLISTS_SEARCH_SET"===t?r:n}}),v=Object(c.c)({loading:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(arguments.length>1?arguments[1]:void 0).type;return"TRACKFEATURES_LOAD_REQUEST"===e||"TRACKFEATURES_LOAD_SUCCESS"!==e&&n},byID:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,t=e.type,r=e.payload;return"TRACKFEATURES_LOAD_SUCCESS"===t?Object(d.a)({},n,r):n}}),g=Object(c.c)({tracks:h,playlists:b,trackFeatures:v}),y=Object(c.c)({session:s,message:m,router:f,entities:g}),E=t(3),O=t.n(E),w=t(8),k=function(n){var e=n.dispatch;return function(n){return function(){var t=Object(w.a)(O.a.mark(function t(r){return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(r);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),e({type:"MESSAGE_SET",payload:"Could not finish this action because of an error"});case 10:case"end":return t.stop()}},t,null,[[0,6]])}));return function(n){return t.apply(this,arguments)}}()}},j=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({shouldHotReload:!1}):c.d)(Object(c.a)(k,l.a)),S=Object(c.e)(y,j),x=t(2),T=t(1),L=t(5),A=t.n(L);function _(){var n=Object(x.a)(["\n  color: inherit;\n\n  font-weight: ",";\n  font-family: ",";\n  font-size: inherit;\n\n  text-decoration: none;\n\n  transition: all 0.1s;\n\n  border: 0;\n  border-radius: 3px;\n  \n  background: transparent;\n\n  margin: 0;\n  padding: 0;\n\n  :hover {\n    cursor: pointer;\n    \n    background: ",";\n    color: ","\n  }\n"]);return _=function(){return n},n}var C=T.default.a.attrs(function(n){return{target:n.external?"_blank":null}})(_(),function(n){return n.theme.font.bold},function(n){return n.theme.font.primary},function(n){return n.theme.primary},function(n){return n.theme.primaryContrast});C.propTypes={external:A.a.bool};var R=C,U=t(10),I=function(n){var e=n.as,t=n.to,r=n.params,i=n.navigateTo,u=Object(U.a)(n,["as","to","params","navigateTo"]);return a.a.createElement(e,Object.assign({as:"button",onClick:function(n){n.preventDefault(),i(t,r)}},u))};I.defaultProps={as:R};var P=Object(o.b)(null,function(n){return{navigateTo:function(e,t){return n(function(n){return{type:"ROUTER_NAVIGATE",payload:{path:n,params:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}}(e,t))}}})(I);function D(){var n=Object(x.a)(["\n  margin-bottom: .75rem;\n"]);return D=function(){return n},n}var F=T.default.p(D()),z=t(33),M=t(11);function N(){var n=Object(x.a)(["\n  html {\n    font-size: 140%;\n  }\n  \n  body {\n    background-color: ",";\n    \n    font-family: ",";\n    line-height: 1.35;\n    \n    overflow-y: scroll;\n  }\n  \n  ::selection {\n    background-color: ",";\n    color: ",";\n  }\n"]);return N=function(){return n},n}function Y(){var n=Object(x.a)(["\n  @media (max-width: 800px) {\n    ","\n  }\n"]);return Y=function(){return n},n}var G={purple:"#453246",red:"#F86254",burgundy:"#B04D5D",yellow:"#FFD05B",white:"#fcfafc",black:"#000"},K={primary:G.red,primaryContrast:G.white,primaryLight:Object(M.a)(G.red,20),primaryDark:Object(M.b)(Object(M.a)(G.red,-10),-30),background:G.purple,secondary:G.red,white:G.white,black:G.black,gray:"#4D4646",grayLight:"#AF99B0",grayLighter:Object(M.a)(G.white,-10),grayEvenLighter:Object(M.b)(Object(M.a)(G.white,-2),-20),palette:G,font:{primary:'"Karla", sans-serif',secondary:'"Rubik", sans-serif',bold:700,small:".8rem",regular:"1rem",large:"1.2rem",h1:"1.4rem",h2:"1.2rem"},shadow:"box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2)"},B=function(){return Object(T.css)(Y(),T.css.apply(void 0,arguments))},q=Object(T.createGlobalStyle)(N(),function(n){return n.theme.background},function(n){return n.theme.font.primary},function(n){return n.theme.background},function(n){return n.theme.white}),V=function(n){var e=n.children;return a.a.createElement(T.ThemeProvider,{theme:K},a.a.createElement(a.a.Fragment,null,a.a.createElement(z.Reset,null),a.a.createElement(q,null),e))};function H(){var n=Object(x.a)(["\n    padding: 1rem;\n  "]);return H=function(){return n},n}function Q(){var n=Object(x.a)(["\n  max-width: 1200px;\n\n  margin: 0 auto;\n  padding: 2rem;\n\n  ","\n"]);return Q=function(){return n},n}var X=T.default.div(Q(),B(H())),W={PRIVACY:"privacy",PLAYLISTS:"playlists",LOGIN:"login",SHUFFLE:"shuffle"};function J(){var n=Object(x.a)(["\n  color: ",";\n  font-size: ",";\n\n  display: flex;\n  justify-content: space-between;\n  flex-flow: wrap;\n  align-items: flex-start;\n"]);return J=function(){return n},n}var Z=Object(T.default)(X).attrs({as:"footer"})(J(),function(n){return n.theme.grayLight},function(n){return n.theme.font.small}),$=function(n){var e=n.version;return a.a.createElement(Z,null,a.a.createElement("div",null,a.a.createElement(F,null,"Shufflify by Tomas \u2764"),a.a.createElement(F,null,a.a.createElement(R,{href:"https://open.spotify.com/user/myspotfiy",external:!0},"@myspotfiy")," ","on Spotify",a.a.createElement("br",null),a.a.createElement(R,{href:"https://github.com/tomasruud",external:!0},"@tomasruud")," ","on GitHub"),a.a.createElement(P,{to:W.PRIVACY},"Privacy")),a.a.createElement("div",null,a.a.createElement(F,null,a.a.createElement(R,{href:"https://github.com/tomasruud/shufflify/issues",external:!0},"Report issues"),a.a.createElement("br",null),"Version ",e)))},nn=Object(o.b)(function(){return{version:"0.1.0-beta"}})($),en=function(n){return n.session.token},tn=function(n){return n.session.user},rn=function(n){return tn(n).name},an=function(n){return tn(n).image},un=function(n){return n.session.loading},on=function(n){return function(n){return!!en(n)}(n)},cn=t(20),ln=t(18),sn=t(14),fn=t(38),mn=t(19),dn=t(34),hn=t(39),pn=t(21),bn=t(35),vn=t.n(bn),gn=function(n){function e(n){var t;return Object(sn.a)(this,e),(t=Object(fn.a)(this,Object(mn.a)(e).call(this,n))).name="NoAccessTokenAvailableError",t}return Object(dn.a)(e,n),e}(Object(hn.a)(Error)),yn=function(){function n(e){Object(sn.a)(this,n),this.client=new vn.a,this.client.setAccessToken(e)}return Object(ln.a)(n,[{key:"setClient",value:function(n){this.client=n}},{key:"getUser",value:function(){var n=Object(w.a)(O.a.mark(function n(){var e,t;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.client.getMe();case 2:if(e=n.sent){n.next=5;break}throw new Error("No user found");case 5:if(e.id){n.next=7;break}throw new Error("User does not have an id");case 7:return t={id:e.id,name:e.display_name},e.images&&e.images[0]&&e.images[0].url&&(t.image=e.images[0].url),n.abrupt("return",t);case 10:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"getPlaylists",value:function(){var n=Object(w.a)(O.a.mark(function n(){var e,t;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.client.getUserPlaylists({limit:50});case 2:e=n.sent,t=e.items;case 4:if(!e.next){n.next=11;break}return n.next=7,this.client.getGeneric(e.next);case 7:(e=n.sent).items&&(t=t.concat(e.items)),n.next=4;break;case 11:return n.abrupt("return",t.map(function(n){var e={id:n.id,ownerID:n.owner.id,name:n.name,uri:n.uri,href:n.href};return n.images&&n.images[0]&&n.images[0].url&&(e.image=n.images[0].url),e}));case 12:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"getTracks",value:function(){var n=Object(w.a)(O.a.mark(function n(e){var t,r;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.client.getPlaylistTracks(e,{fields:"items(track(uri,id,name,artists(name),is_local)), next"});case 2:t=n.sent,r=t.items;case 4:if(!t.next){n.next=11;break}return n.next=7,this.client.getGeneric(t.next);case 7:(t=n.sent).items&&(r=r.concat(t.items)),n.next=4;break;case 11:return n.abrupt("return",r.map(function(n){return{uri:n.track.uri,id:n.track.id,name:n.track.name,artists:n.track.artists.map(function(n){return n.name}),local:!!n.track.is_local}}));case 12:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},{key:"getFeaturesForTracks",value:function(){var n=Object(w.a)(O.a.mark(function n(e){var t,r,a,i=this;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=Object(cn.a)(e),r={},a=O.a.mark(function n(){var e,a,u;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.splice(0,100),n.next=3,i.client.getAudioFeaturesForTracks(e);case 3:if(a=n.sent,u=a.audio_features){n.next=7;break}throw new Error("No audio features provided");case 7:r=Object(d.a)({},r,u.reduce(function(n,t,r){return t?(n[e[r]]={acousticness:t.acousticness,bpm:t.tempo,danceability:t.danceability,energy:t.energy,instrumentalness:t.instrumentalness,key:t.key,liveness:t.liveness,major:1===t.mode,positivity:t.valence,speechiness:t.speechiness},n):n},{}));case 8:case"end":return n.stop()}},n)});case 3:if(!(t.length>0)){n.next=7;break}return n.delegateYield(a(),"t0",5);case 5:n.next=3;break;case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},{key:"moveTrack",value:function(){var n=Object(w.a)(O.a.mark(function n(e,t,r){var a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.client.reorderTracksInPlaylist(e,t,r);case 2:return a=n.sent,n.abrupt("return",a.snapshot_id);case 4:case"end":return n.stop()}},n,this)}));return function(e,t,r){return n.apply(this,arguments)}}()}],[{key:"getAuthenticationURL",value:function(n,e){var t=Object(pn.stringify)({redirect_uri:e,client_id:n,scope:["playlist-read-private","playlist-modify-private"].join(" "),response_type:"token",show_dialog:!1});return"https://accounts.spotify.com/authorize?".concat(t)}},{key:"getAccessToken",value:function(){var n=Object(w.a)(O.a.mark(function n(e){var t,r,a;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.search,r=e.hash,!Object(pn.parse)(t).error){n.next=4;break}throw new Error("Authentication error");case 4:if((a=Object(pn.parse)(r)).access_token){n.next=7;break}throw new gn("No access token found");case 7:return n.abrupt("return",a.access_token);case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}]),n}(),En=["myspotfiy"],On=function(n,e){return{type:"SESSION_BOOTSTRAP_COMPLETE",payload:{token:n,user:e}}},wn=function(){return Object(w.a)(O.a.mark(function n(){return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"d889de9a8c554ddebea3a0b88fdf5874","https://shufflify.ruud.ninja",window.location=yn.getAuthenticationURL("d889de9a8c554ddebea3a0b88fdf5874","https://shufflify.ruud.ninja");case 3:case"end":return n.stop()}},n)}))};function kn(){var n=Object(x.a)(["\n  font-family: ",";\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n\n  display: flex;\n\n  align-items: center;\n"]);return kn=function(){return n},n}function jn(){var n=Object(x.a)(["\n  width: 1.8rem;\n  height: 1.8rem;\n\n  margin-right: 0.5rem;\n\n  display: grid;\n\n  grid-template-columns: 1fr 1fr;\n"]);return jn=function(){return n},n}function Sn(){var n=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n\n  display: block;\n\n  background-color: ",";\n"]);return Sn=function(){return n},n}var xn=T.default.span(Sn(),function(n){return n.color}),Tn=T.default.div(jn()),Ln=T.default.span(kn(),function(n){return n.theme.font.primary},function(n){return n.theme.font.bold},function(n){return n.theme.font.h1},function(n){return n.theme.black}),An=Object(T.withTheme)(function(n){var e=n.theme,t=Object(r.useMemo)(function(){return Object.keys(e.palette).sort(function(){return.5-Math.random()}).map(function(n){return e.palette[n]})},[e]);return a.a.createElement(Ln,null,a.a.createElement(Tn,null,a.a.createElement(xn,{color:t[0]}),a.a.createElement(xn,{color:t[1]}),a.a.createElement(xn,{color:t[2]}),a.a.createElement(xn,{color:t[3]})),"Shufflify")});function _n(){var n=Object(x.a)(["\n    display: none;\n  "]);return _n=function(){return n},n}function Cn(){var n=Object(x.a)(["\n  ","\n"]);return Cn=function(){return n},n}function Rn(){var n=Object(x.a)(["\n    padding: 0.25rem;\n  "]);return Rn=function(){return n},n}function Un(){var n=Object(x.a)(["\n  display: flex;\n  align-items: center;\n\n  background-color: ",";\n  color: ",";\n\n  padding: 0.25rem 0.65rem 0.25rem 0.25rem;\n  border-radius: 666rem;\n\n  ",";\n  \n  ","\n"]);return Un=function(){return n},n}function In(){var n=Object(x.a)(["\n    margin-right: 0;\n  "]);return In=function(){return n},n}function Pn(){var n=Object(x.a)(["\n  width: 1.5rem;\n  height: 1.5rem;\n\n  border-radius: 100%;\n  border: 2px solid ",";\n\n  margin-right: 0.25rem;\n  \n  ","\n"]);return Pn=function(){return n},n}var Dn=T.default.img(Pn(),function(n){return n.theme.grayEvenLighter},B(In())),Fn=T.default.span(Un(),function(n){return n.theme.grayLight},function(n){return n.theme.grayEvenLighter},function(n){return n.theme.shadow},B(Rn())),zn=T.default.span(Cn(),B(_n())),Mn=function(n){var e=n.image,t=n.name;return a.a.createElement(Fn,null,a.a.createElement(Dn,{src:e,alt:"Profile picture"}),a.a.createElement(zn,null,t))},Nn=Object(o.b)(function(n){return{image:an(n),name:rn(n)}})(Mn);function Yn(){var n=Object(x.a)(["\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: wrap;\n"]);return Yn=function(){return n},n}var Gn=T.default.header(Yn(),function(n){return n.theme.gray}),Kn=function(n){var e=n.isLoading,t=n.isAuthenticated,r=n.authenticate;return a.a.createElement(Gn,null,a.a.createElement(P,{to:"",style:{background:"transparent"}},a.a.createElement(An,null)),e?null:t?a.a.createElement(Nn,null):a.a.createElement(R,{as:"button",onClick:function(){return r()}},"Sign in"))},Bn=Object(o.b)(function(n){return{isAuthenticated:on(n),isLoading:un(n)}},function(n){return{authenticate:function(){return n(wn())}}})(Kn),qn=function(n){return n.router.params},Vn=function(n){return n.router.path};function Hn(){var n=Object(x.a)(["\n  max-width: 600px;\n"]);return Hn=function(){return n},n}var Qn=T.default.div(Hn());function Xn(){var n=Object(x.a)(["\n  font-size: ",";\n"]);return Xn=function(){return n},n}function Wn(){var n=Object(x.a)(["\n  font-family: ",";\n  font-weight: 700;\n  font-size: ",";\n  \n  color: ",";\n  \n  margin-bottom: .5rem;\n"]);return Wn=function(){return n},n}var Jn=T.default.h1(Wn(),function(n){return n.theme.font.secondary},function(n){return n.theme.font.h1},function(n){return n.theme.black}),Zn=Object(T.default)(Jn).attrs({as:"h2"})(Xn(),function(n){return n.theme.font.h2}),$n=Jn,ne=function(){return a.a.createElement(Qn,null,a.a.createElement($n,null,"Privacy"),a.a.createElement(F,null,"Shufflify does not store any of your data anywhere."),a.a.createElement(F,null,"When you authenticate with Spotify, you receive a unique code that is stored in your browser as long as you are using the app. Once you refresh the page, your code is no longer stored, and you will have to authenticate again."))};function ee(){var n=Object(x.a)(["\n  color: ",";\n  background-color: ",";\n  \n  :hover {\n    color: ",";\n    background-color: ",";\n  }\n"]);return ee=function(){return n},n}function te(){var n=Object(x.a)(["\n  padding: 0.75rem 1rem;\n  margin: 0;\n\n  border-radius: 666rem;\n  border: 0;\n\n  font-weight: ",";\n  font-size: ",";\n  font-family: ",";\n\n  color: ",";\n  background-color: ",";\n  \n  display: inline-block;\n  text-decoration: none;\n\n  ",";\n\n  transition: all .1s;\n\n  :hover {\n    cursor: pointer;\n    \n    background-color: ",";\n  }\n\n  :active,\n  :focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ",",\n      0 0 0 4px ",";\n  }\n"]);return te=function(){return n},n}var re=T.default.button(te(),function(n){return n.theme.font.bold},function(n){return n.theme.font.regular},function(n){return n.theme.font.primary},function(n){return n.theme.primaryContrast},function(n){return n.theme.primary},function(n){return n.theme.shadow},function(n){return n.theme.primaryDark},function(n){return n.theme.white},function(n){return n.theme.primaryLight}),ae=Object(T.default)(re)(ee(),function(n){return n.theme.black},function(n){return n.theme.white},function(n){return n.theme.white},function(n){return n.theme.primary}),ie=re,ue=function(n){var e=n.authenticate;return a.a.createElement(Qn,null,a.a.createElement($n,null,"Make your playlists more interesting"),a.a.createElement(F,null,"Shufflify allows you to shuffle and order your Spotify playlists in new and exciting ways."," "),a.a.createElement(F,null,"Continue by clicking the button below, and allow access to your playlists to start shuffling!"),a.a.createElement(ie,{onClick:function(){return e()}},"Sign in with Spotify"))},oe=Object(o.b)(null,function(n){return{authenticate:function(){return n(wn())}}})(ue),ce=t(36),le=function(n){return Object.values(n.entities.playlists.byURI)},se=function(n){return n.entities.playlists.loading},fe=function(n,e){return n.entities.playlists.byURI[e]},me=function(n){return n.entities.playlists.search},de=Object(ce.a)([me,le,function(n){return tn(n).id}],function(n,e,t){return n=n.toLowerCase(),(e=e.filter(function(e){return!n||e.name&&e.name.toLowerCase().includes(n)})).filter(function(n){return n.ownerID===t})});A.a.shape({uri:A.a.string.isRequired,id:A.a.string.isRequired,ownerID:A.a.string.isRequired,name:A.a.string.isRequired,href:A.a.string.isRequired,image:A.a.string});function he(){var n=Object(x.a)(["\n  margin: 4px;\n"]);return he=function(){return n},n}function pe(){var n=Object(x.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n\n  display: flex;\n  flex-flow: wrap;\n"]);return pe=function(){return n},n}var be=T.default.ul(pe()),ve=T.default.li(he()),ge=function(n){var e=n.playlists,t=Object(U.a)(n,["playlists"]);return a.a.createElement(be,t,e.map(function(n){return a.a.createElement(ve,{key:n.uri},a.a.createElement(ae,{as:P,to:W.SHUFFLE,params:{uri:n.uri}},n.name))}))};ge.defaultProps={playlists:[]};var ye=ge,Ee=Object(o.b)(function(n){return{playlists:de(n)}})(ye),Oe=function(n){var e=n.emoji,t=n.alt;return a.a.createElement("span",{role:"img","aria-label":t},e)};function we(){var n=Object(x.a)(["\n  border: 0;\n  border-top-left-radius: 666rem;\n  border-bottom-left-radius: 666rem;\n\n  background-color: transparent;\n\n  padding: 0.75rem;\n\n  font-size: inherit;\n  \n  width: 100%;\n\n  :active,\n  :focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ",",\n      0 0 0 4px ",";\n  }\n"]);return we=function(){return n},n}function ke(){var n=Object(x.a)(["\n  border: 0;\n  border-top-right-radius: 666rem;\n  border-bottom-right-radius: 666rem;\n\n  background: transparent;\n\n  padding: 0.75rem;\n\n  font-size: inherit;\n\n  :hover {\n    cursor: pointer;\n  }\n\n  :active,\n  :focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ",",\n      0 0 0 4px ",";\n  }\n"]);return ke=function(){return n},n}function je(){var n=Object(x.a)(["\n  display: flex;\n  \n  max-width: 400px;\n\n  background-color: ",";\n  font-size: ",";\n\n  border-radius: 666rem;\n\n  ",";\n"]);return je=function(){return n},n}var Se=T.default.div(je(),function(n){return n.theme.white},function(n){return n.theme.font.small},function(n){return n.theme.shadow}),xe=T.default.button(ke(),function(n){return n.theme.white},function(n){return n.theme.primaryLight}),Te=T.default.input(we(),function(n){return n.theme.white},function(n){return n.theme.primaryLight}),Le=function(n){var e=n.setFilter,t=n.filter,r=Object(U.a)(n,["setFilter","filter"]);return a.a.createElement(Se,null,a.a.createElement(Te,Object.assign({type:"text",onChange:function(n){return e(n.target.value)},value:t},r)),a.a.createElement(xe,{onClick:function(){return e("")},disabled:""===t,ariaLabel:"Clear"},a.a.createElement(Oe,{emoji:"\u274c",alt:"Clear"})))},Ae=t(37);function _e(){var n=Object(x.a)(["\n  display: block;\n\n  position: relative;\n\n  width: 2rem;\n  height: 2rem;\n"]);return _e=function(){return n},n}function Ce(){var n=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n\n  border-radius: 100%;\n\n  background-color: ",";\n  opacity: 0.8;\n\n  animation: "," 1.5s ","s\n    cubic-bezier(0.53, 0.06, 0.5, 0.95) infinite;\n\n  transform: scale(0);\n\n  position: absolute;\n"]);return Ce=function(){return n},n}function Re(){var n=Object(x.a)(["\n  0% {\n   transform: scale(0);\n  }\n  \n  50% {\n  transform: scale(1);\n  }\n  \n  100% {\n  transform: scale(0);\n  }\n"]);return Re=function(){return n},n}var Ue=Object(T.keyframes)(Re()),Ie=T.default.div.attrs(function(n){return{offset:n.offset||0}})(Ce(),function(n){return n.theme.secondary},Ue,function(n){return n.offset}),Pe=T.default.div(_e()),De=function(n){var e=Object(Ae.a)({},n);return a.a.createElement(Pe,e,a.a.createElement(Ie,null),a.a.createElement(Ie,{offset:.75}))},Fe=function(n){var e=n.isLoading,t=n.loadPlaylists,i=n.updateSearch,u=n.search;return Object(r.useLayoutEffect)(function(){t()},[t]),a.a.createElement(a.a.Fragment,null,a.a.createElement($n,null,"Select playlist to shuffle"),a.a.createElement(F,null,"Click on the name of a playlist to enter shuffle-mode."),a.a.createElement(Le,{setFilter:i,filter:u,placeholder:"Search by name"}),e?a.a.createElement(De,{style:{marginTop:"1rem"}}):a.a.createElement(Ee,{style:{marginTop:"1rem"}}))},ze=Object(o.b)(function(n){return{isLoading:se(n),search:me(n)}},function(n){return{loadPlaylists:function(){return n(function(){var n=Object(w.a)(O.a.mark(function n(e,t){var r,a,i;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=t(),!(le(u).length>0)){n.next=2;break}return n.abrupt("return",null);case 2:return e({type:"PLAYLISTS_LOAD_REQUEST"}),r=en(t()),a=new yn(r),n.next=7,a.getPlaylists();case 7:return i=n.sent,n.abrupt("return",e({type:"PLAYLISTS_LOAD_SUCCESS",payload:i}));case 9:case"end":return n.stop()}var u},n)}));return function(e,t){return n.apply(this,arguments)}}())},updateSearch:function(e){return n(function(n){return{type:"PLAYLISTS_SEARCH_SET",payload:n}}(e))}}})(Fe),Me=function(n,e){return n.entities.tracks.byURI[e]},Ne=function(n,e){var t=fe(n,e);if(t.tracks)return t.tracks.map(function(e){return Me(n,e)})},Ye=function(n){return n.entities.tracks.loading},Ge=t(4),Ke=function(n,e){return[]},Be=function(){function n(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(sn.a)(this,n),this.display=e,this.description=t,this.func=r,this.opts=a}return Object(ln.a)(n,[{key:"hasOptions",value:function(){return!!this.opts}}]),n}(),qe={scatter:new Be("Scatter","Distributes tracks evenly across the playlist based on the selected field. This creates what seems like a more randomized playlist than by just randomizing track order.",function(n,e){return[]},["energy","danceability","bpm","acousticness","instrumentalness","liveness","positivity","speechiness","key"]),random:new Be("Random","Takes all tracks and places them at random locations. This is the most random shuffling algorithm, but may produce results that does not seem too random.",function(n){for(var e=Object(cn.a)(n.keys()),t=n.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),a=[e[r],e[t]];e[t]=a[0],e[r]=a[1]}return e}),risePeakResolve:new Be("Hollywood","Tries to order tracks by the selected field so that is starts at a low value and increases until reaching a climax, before returning back down at the end.",function(n,e){return[]},["energy","danceability","bpm","acousticness","instrumentalness","liveness","positivity","speechiness"]),camelot:new Be("Camelot","Shuffles the playlist according to the Camelot Wheel, so there are noe harsh changes in key in the mix. Works best for playlists with more tracks.",function(n){return[]}),ascending:new Be("Ascend","Starts at the lowest value and just keeps rising. Good for a get-psyched-mix.",Ke,["energy","danceability","bpm","acousticness","instrumentalness","liveness","positivity","speechiness"])};A.a.shape({uri:A.a.string.isRequired,id:A.a.string,name:A.a.string.isRequired,artists:A.a.arrayOf(A.a.string).isRequired,local:A.a.bool});function Ve(){var n=Object(x.a)(["\n  text-transform: uppercase;\n  color: ",";\n"]);return Ve=function(){return n},n}function He(){var n=Object(x.a)(["\n  display: block;\n  flex-flow: row nowrap;\n  flex-grow: 1;\n  flex-basis: 0;\n\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  :not(:last-child) {\n    margin-right: 1rem;\n  }\n"]);return He=function(){return n},n}function Qe(){var n=Object(x.a)(["\n  display: flex;\n  flex-flow: row nowrap;\n\n  width: 100%;\n  padding-bottom: 0.5rem;\n  margin-bottom: 0.5rem;\n  border-bottom: 1px solid ",";\n"]);return Qe=function(){return n},n}function Xe(){var n=Object(x.a)(["\n  display: flex;\n  flex-flow: column nowrap;\n  flex: 1 1 auto;\n\n  width: 100%;\n\n  font-size: ",";\n"]);return Xe=function(){return n},n}var We=T.default.div(Xe(),function(n){return n.theme.font.small}),Je=T.default.div(Qe(),function(n){return n.theme.grayLighter}),Ze=T.default.div(He()),$e=Object(T.default)(Ze)(Ve(),function(n){return n.theme.grayLight}),nt=function(n){var e=n.tracks;return a.a.createElement(We,null,a.a.createElement(Je,null,a.a.createElement($e,null,"Title"),a.a.createElement($e,null,"Artist")),!!e&&e.map(function(n,e){return a.a.createElement(Je,{key:""+n.uri+e},a.a.createElement(Ze,null,n.name),a.a.createElement(Ze,null,n.artists.join(", ")))}))};nt.defaultProps={tracks:[]};var et=nt,tt=Object(o.b)(function(n){return{tracks:Ne(n,qn(n).uri)}})(et);function rt(){var n=Object(x.a)(["\n  font-size: ",";\n  text-transform: uppercase;\n  \n  margin-bottom: 2rem;\n"]);return rt=function(){return n},n}function at(){var n=Object(x.a)(["\n  border: 0;\n  border-radius: 666rem;\n\n  font-size: ",";\n\n  padding: 0.5rem;\n  margin: 0;\n\n  ",";\n  \n  color: ",";\n  \n  > option[disabled] {\n    color: ",";\n  }\n  \n  > option {\n    color: ",";\n  }\n\n  :hover {\n    cursor: pointer;\n  }\n  \n  :active,\n  :focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ",",\n      0 0 0 4px ",";\n  }\n"]);return at=function(){return n},n}var it=T.default.select(at(),function(n){return n.theme.font.regular},function(n){return n.theme.shadow},function(n){return""===n.value?n.theme.grayLight:n.theme.gray},function(n){return n.theme.grayLight},function(n){return n.theme.gray},function(n){return n.theme.white},function(n){return n.theme.primaryLight}),ut=Object(T.default)(P)(rt(),function(n){return n.theme.font.small}),ot=function(n){var e=n.playlist,t=n.isLoading,i=n.loadTracks;Object(r.useLayoutEffect)(function(){e.tracks||i(e.uri)},[i,e]);var u=Object(r.useState)(""),o=Object(Ge.a)(u,2),c=o[0],l=o[1],s=Object(r.useState)(""),f=Object(Ge.a)(s,2),m=f[0],d=f[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(ut,{to:W.PLAYLISTS},"\xab Back to overview"),a.a.createElement($n,null,e.name),a.a.createElement(F,null,"Select a shuffle strategy from the dropdown below."),a.a.createElement(it,{value:c,onChange:function(n){l(n.target.value),d("")}},a.a.createElement("option",{disabled:!0,value:""},"Strategy"),Object.keys(qe).map(function(n){return a.a.createElement("option",{value:n},qe[n].display)})),!!qe[c]&&qe[c].hasOptions()&&a.a.createElement(it,{value:m,onChange:function(n){return d(n.target.value)}},a.a.createElement("option",{disabled:!0,value:""},"- Select field -"),qe[c].opts.map(function(n){return a.a.createElement("option",{value:n},n.toLowerCase())})),a.a.createElement(Zn,null,"Original order"),t?a.a.createElement(De,null):a.a.createElement(tt,null))},ct=Object(o.b)(function(n){return{playlist:fe(n,qn(n).uri),isLoading:Ye(n)}},function(n){return{loadTracks:function(e){return n(function(n){return function(){var e=Object(w.a)(O.a.mark(function e(t,r){var a,i,u,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"TRACKS_LOAD_REQUEST"}),a=fe(r(),n).id,i=en(r()),u=new yn(i),e.next=6,u.getTracks(a);case 6:return o=e.sent,e.abrupt("return",t({type:"TRACKS_LOAD_SUCCESS",payload:{playlistURI:n,tracks:o}}));case 8:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}()}(e))}}})(ot),lt=Object(o.b)(function(n){return{path:Vn(n),isAuthenticated:on(n)}},function(n){return{bootstrap:function(){return n(function(){var n=Object(w.a)(O.a.mark(function n(e){var t,r,a,i,u,o,c;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=window,r=t.location,a=t.history,i=t.title,n.next=4,yn.getAccessToken(r);case 4:return u=n.sent,o=new yn(u),n.next=8,o.getUser();case 8:if(c=n.sent,a.replaceState({},i,r.pathname),l=c.id,En.includes(l)){n.next=12;break}throw Error("You are not whitelisted");case 12:return n.abrupt("return",e(On(u,c)));case 15:if(n.prev=15,n.t0=n.catch(0),!(n.t0 instanceof gn)){n.next=21;break}return n.abrupt("return",e(On(null,{})));case 21:throw n.t0;case 22:case"end":return n.stop()}var l},n,null,[[0,15]])}));return function(e){return n.apply(this,arguments)}}())},authenticate:function(){return n(wn())}}})(function(n){var e=n.path,t=n.isAuthenticated,i=n.bootstrap;if(Object(r.useLayoutEffect)(function(){t||i()},[i,t]),e===W.PRIVACY)return a.a.createElement(ne,null);if(t)switch(e){case W.SHUFFLE:return a.a.createElement(ct,null);case W.PLAYLISTS:default:return a.a.createElement(ze,null)}return a.a.createElement(oe,null)});function st(){var n=Object(x.a)(["\n  border: 0;\n  background: transparent;\n  \n  color: inherit;\n\n  float: right;\n\n  vertical-align: middle;\n  font-size: 1rem;\n\n  :hover {\n    cursor: pointer;\n  }\n  \n  :active,\n  :focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ",",\n      0 0 0 4px ",";\n  }\n"]);return st=function(){return n},n}function ft(){var n=Object(x.a)(["\n  color: ",";\n  background-color: ",";\n  \n  padding: 0.75rem;\n\n  ",";\n"]);return ft=function(){return n},n}var mt=T.default.div(ft(),function(n){return n.theme.white},function(n){return n.theme.secondary},function(n){return n.theme.shadow}),dt=T.default.button(st(),function(n){return n.theme.secondary},function(n){return n.theme.primaryLight}),ht=function(n){var e=n.children,t=n.onClear,r=Object(U.a)(n,["children","onClear"]);return a.a.createElement(mt,r,e,a.a.createElement(dt,{onClick:function(){return t()},ariaLabel:"Close"},"x"))},pt=function(n){return!!n.message.message},bt=function(n){return n.message.message},vt=Object(o.b)(function(n){return{text:bt(n),isSet:pt(n)}},function(n){return{clear:function(){return n({type:"MESSAGE_CLEAR"})}}})(function(n){var e=n.text,t=n.isSet,r=n.clear,i=Object(U.a)(n,["text","isSet","clear"]);return t?a.a.createElement(ht,Object.assign({onClear:r},i),e):null});function gt(){var n=Object(x.a)(["\n  margin: 3rem 0;\n\n  color: ",";\n"]);return gt=function(){return n},n}function yt(){var n=Object(x.a)(["\n  background-color: ",";\n  ",";\n"]);return yt=function(){return n},n}var Et=T.default.div(yt(),function(n){return n.theme.white},function(n){return n.theme.shadow}),Ot=T.default.main(gt(),function(n){return n.theme.gray}),wt=function(){return a.a.createElement(V,null,a.a.createElement(Et,null,a.a.createElement(X,null,a.a.createElement(Bn,null),a.a.createElement(Ot,null,a.a.createElement(vt,{style:{marginBottom:"1rem"}}),a.a.createElement(lt,null)))),a.a.createElement(nn,null))};u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,{store:S},a.a.createElement(wt,null))),document.getElementById("shufflify"))}},[[41,1,2]]]);
//# sourceMappingURL=main.35087c38.chunk.js.map