{"version":3,"sources":["reducers/session.js","constants/actions.js","reducers/router.js","reducers/message.js","reducers/tracks.js","reducers/playlists.js","reducers/trackFeatures.js","reducers/entities.js","reducers/index.js","middleware/error.js","actions/message.js","store.js","components/Link.js","containers/Link.js","actions/router.js","components/Paragraph.js","components/Theme.js","components/Wrapper.js","constants/routes.js","components/Footer.js","containers/Footer.js","selectors/session.js","services/spotify.js","constants/whitelist.js","actions/session.js","components/Logo.js","components/Badge.js","containers/UserBadge.js","components/Nav.js","containers/Nav.js","selectors/router.js","components/Content.js","components/Title.js","components/Privacy.js","components/Button.js","components/Login.js","containers/Login.js","selectors/playlists.js","models/playlist.js","components/PlaylistList.js","containers/VisiblePlaylists.js","components/Emoji.js","components/Filter.js","components/Loader.js","components/Playlists.js","containers/Playlists.js","actions/playlists.js","selectors/tracks.js","services/shuffler.js","constants/algorithms.js","models/track.js","components/TrackList.js","containers/VisibleTracks.js","components/Shuffler.js","containers/Shuffler.js","actions/tracks.js","containers/Router.js","components/Message.js","selectors/message.js","containers/Notice.js","components/App.js","index.js"],"names":["combineReducers","token","state","arguments","length","undefined","_ref","type","payload","user","_ref2","loading","path","params","message","byURI","tracks","reduce","acc","track","uri","Object","objectSpread","URIbyID","id","toAdd","playlist","playlistURI","map","t","defineProperty","search","byID","playlists","trackFeatures","root","session","router","entities","errorHandler","dispatch","next","asyncToGenerator","regenerator_default","a","mark","_callee","action","wrap","_context","prev","abrupt","sent","t0","console","error","stop","_x","apply","this","enhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","shouldHotReload","compose","applyMiddleware","thunk","store","createStore","Link","styled","attrs","target","external","_templateObject","p","theme","font","bold","primary","primaryContrast","propTypes","PropTypes","bool","Component","as","to","navigateTo","rest","objectWithoutProperties","react_default","createElement","assign","onClick","e","preventDefault","defaultProps","Base","connect","navigate","Paragraph","Paragraph_templateObject","colors","purple","red","burgundy","yellow","white","black","primaryLight","lighten","primaryDark","saturate","background","secondary","gray","grayLight","grayLighter","grayEvenLighter","palette","small","regular","large","h1","h2","shadow","css","Theme_templateObject","Global","createGlobalStyle","_templateObject2","Theme","children","styled_components_browser_esm","Fragment","lib","Wrapper","div","Wrapper_templateObject","Wrapper_templateObject2","routes","PRIVACY","PLAYLISTS","LOGIN","SHUFFLE","Wrap","Container","Footer_templateObject","Footer","version","components_Paragraph","components_Link","href","containers_Link","process","userName","name","userImage","image","authenticated","hasToken","NoAccessTokenAvailableError","_Error","m","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","inherits","wrapNativeSuper","Error","Spotify","client","Client","setAccessToken","getMe","u","display_name","images","url","getUserPlaylists","limit","ps","l","items","getGeneric","concat","list","ownerID","owner","playlistID","getPlaylistTracks","fields","ts","artists","local","is_local","trackIDs","features","ids","splice","_this2","getAudioFeaturesForTracks","audio_features","f","i","acousticness","bpm","tempo","danceability","energy","instrumentalness","key","liveness","major","mode","positivity","valence","speechiness","playlistId","from","reorderTracksInPlaylist","res","snapshot_id","clientID","redirectURL","q","stringify","redirect_uri","client_id","scope","join","response_type","show_dialog","hash","parse","h","access_token","whitelist","success","authenticate","location","getAuthenticationURL","Box","span","Logo_templateObject","color","BoxWrap","Logo_templateObject2","_templateObject3","withTheme","useMemo","keys","sort","Math","random","c","Logo_Wrap","Image","img","Badge_templateObject","Badge_templateObject2","Badge_templateObject3","_templateObject4","Name","_templateObject5","_templateObject6","Badge","Badge_Wrap","src","alt","header","Nav_templateObject","Nav","isLoading","isAuthenticated","Nav_Wrapper","style","components_Logo","UserBadge","Content","Content_templateObject","Heading1","Title_templateObject","Heading2","Title_templateObject2","Privacy","components_Content","Title","Button","button","Button_templateObject","SecondaryButton","Button_templateObject2","Login","components_Button","values","visiblePlaylists","createSelector","userID","toLowerCase","filter","includes","Types","shape","string","isRequired","List","ul","PlaylistList_templateObject","Item","li","PlaylistList_templateObject2","PlaylistList","Emoji","emoji","role","aria-label","Filter_templateObject","Filter_templateObject2","Input","input","Filter_templateObject3","Filter","setFilter","Filter_Wrap","onChange","value","Filter_Button","disabled","ariaLabel","components_Emoji","animation","keyframes","Loader_templateObject","Ball","offset","Loader_templateObject2","Loader_templateObject3","Loader","props","esm_extends","Loader_Wrap","Playlists","loadPlaylists","updateSearch","useLayoutEffect","components_Filter","placeholder","components_Loader","marginTop","VisiblePlaylists","getState","getPlaylists","_x2","setSearch","URI","byPlaylistURI","playlistByURI","ascending","arr","by","Algorithm","display","description","func","opts","all","scatter","shuf","toConsumableArray","j","floor","risePeakResolve","camelot","arrayOf","Table","TrackList_templateObject","Row","TrackList_templateObject2","Cell","TrackList_templateObject3","TrackList_templateObject4","TrackList","TrackList_Title","Select","select","Shuffler_templateObject","Back","Shuffler_templateObject2","Shuffler","loadTracks","_useState","useState","_useState2","slicedToArray","setType","_useState3","_useState4","field","setField","algorithms","k","hasOptions","o","VisibleTracks","getTracks","trackActions","bootstrap","_callee2","_window","history","title","_context2","getAccessToken","getUser","replaceState","pathname","username","components_Privacy","containers_Shuffler","containers_Playlists","containers_Login","Message_templateObject","Close","Message_templateObject2","Message","onClear","Message_Wrapper","hasMessage","text","isSet","clear","components_Message","App_templateObject","main","App_templateObject2","App","components_Theme","App_Wrapper","components_Wrapper","containers_Nav","App_Content","containers_Notice","marginBottom","containers_Router","containers_Footer","ReactDOM","render","StrictMode","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.35087c38.chunk.js","sourcesContent":["import { SESSION_BOOTSTRAP_COMPLETE } from '../constants/actions'\r\nimport { combineReducers } from 'redux'\r\n\r\nconst token = (state = null, { type, payload }) => {\r\n  if (type === SESSION_BOOTSTRAP_COMPLETE) {\r\n    return payload.token\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst user = (state = {}, { type, payload }) => {\r\n  if (type === SESSION_BOOTSTRAP_COMPLETE) {\r\n    return payload.user\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst loading = (state = true, { type }) => {\r\n  if (type === SESSION_BOOTSTRAP_COMPLETE) {\r\n    return false\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  token,\r\n  user,\r\n  loading\r\n})\r\n","export const ROUTER_NAVIGATE = 'ROUTER_NAVIGATE'\r\n\r\nexport const MESSAGE_SET = 'MESSAGE_SET'\r\nexport const MESSAGE_CLEAR = 'MESSAGE_CLEAR'\r\n\r\nexport const PLAYLISTS_LOAD_REQUEST = 'PLAYLISTS_LOAD_REQUEST'\r\nexport const PLAYLISTS_LOAD_SUCCESS = 'PLAYLISTS_LOAD_SUCCESS'\r\nexport const PLAYLISTS_SEARCH_SET = 'PLAYLISTS_SEARCH_SET'\r\n\r\nexport const SESSION_BOOTSTRAP_COMPLETE = 'SESSION_BOOTSTRAP_COMPLETE'\r\n\r\nexport const TRACKS_LOAD_REQUEST = 'TRACKS_LOAD_REQUEST'\r\nexport const TRACKS_LOAD_SUCCESS = 'TRACKS_LOAD_SUCCESS'\r\n\r\nexport const TRACKFEATURES_LOAD_REQUEST = 'TRACKFEATURES_LOAD_REQUEST'\r\nexport const TRACKFEATURES_LOAD_SUCCESS = 'TRACKFEATURES_LOAD_SUCCESS'","import { combineReducers } from 'redux'\r\nimport { ROUTER_NAVIGATE } from '../constants/actions'\r\n\r\nconst path = (state = '', { type, payload }) => {\r\n  if (type === ROUTER_NAVIGATE) {\r\n    return payload.path\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst params = (state = {}, { type, payload }) => {\r\n  if (type === ROUTER_NAVIGATE) {\r\n    return payload.params\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  path,\r\n  params\r\n})\r\n","import { combineReducers } from 'redux'\r\nimport { MESSAGE_CLEAR, MESSAGE_SET } from '../constants/actions'\r\n\r\nconst message = (state = null, { type, payload }) => {\r\n  if (type === MESSAGE_SET) {\r\n    return payload\r\n  } else if (type === MESSAGE_CLEAR) {\r\n    return null\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  message\r\n})\r\n","import { combineReducers } from 'redux'\r\nimport { TRACKS_LOAD_REQUEST, TRACKS_LOAD_SUCCESS } from '../constants/actions'\r\n\r\nconst byURI = (state = {}, { type, payload }) => {\r\n  if (type === TRACKS_LOAD_SUCCESS) {\r\n    const tracks = payload.tracks.reduce((acc, track) => {\r\n      acc[track.uri] = track\r\n      return acc\r\n    }, {})\r\n\r\n    return {\r\n      ...state,\r\n      ...tracks\r\n    }\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst URIbyID = (state = {}, { type, payload }) => {\r\n  if (type === TRACKS_LOAD_SUCCESS) {\r\n    const tracks = payload.tracks.reduce((acc, track) => {\r\n      if (track.id) {\r\n        acc[track.id] = track.uri\r\n      }\r\n\r\n      return acc\r\n    }, {})\r\n\r\n    return {\r\n      ...state,\r\n      ...tracks\r\n    }\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst loading = (state = false, { type }) => {\r\n  if (type === TRACKS_LOAD_REQUEST) {\r\n    return true\r\n  } else if (type === TRACKS_LOAD_SUCCESS) {\r\n    return false\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  loading,\r\n  byURI,\r\n  URIbyID\r\n})\r\n","import { combineReducers } from 'redux'\r\nimport {\r\n  PLAYLISTS_LOAD_REQUEST,\r\n  PLAYLISTS_LOAD_SUCCESS,\r\n  PLAYLISTS_SEARCH_SET,\r\n  TRACKS_LOAD_SUCCESS\r\n} from '../constants/actions'\r\n\r\nconst byURI = (state = {}, { type, payload }) => {\r\n  if (type === PLAYLISTS_LOAD_SUCCESS) {\r\n    const toAdd = payload.reduce((acc, playlist) => {\r\n      acc[playlist.uri] = playlist\r\n      return acc\r\n    }, {})\r\n\r\n    return {\r\n      ...state,\r\n      ...toAdd\r\n    }\r\n  } else if (type === TRACKS_LOAD_SUCCESS) {\r\n    const playlist = {...state[payload.playlistURI]}\r\n    playlist.tracks = payload.tracks.map(t => t.uri)\r\n\r\n    return {\r\n      ...state,\r\n      [payload.playlistURI]: playlist\r\n    }\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst search = (state = '', { type, payload }) => {\r\n  if (type === PLAYLISTS_SEARCH_SET) {\r\n    return payload\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst loading = (state = false, { type }) => {\r\n  if (type === PLAYLISTS_LOAD_REQUEST) {\r\n    return true\r\n  } else if (type === PLAYLISTS_LOAD_SUCCESS) {\r\n    return false\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  loading,\r\n  byURI,\r\n  search\r\n})\r\n","import { combineReducers } from 'redux'\r\nimport {\r\n  TRACKFEATURES_LOAD_REQUEST,\r\n  TRACKFEATURES_LOAD_SUCCESS\r\n} from '../constants/actions'\r\n\r\nconst byID = (state = {}, {type, payload}) => {\r\n  if (type === TRACKFEATURES_LOAD_SUCCESS) {\r\n    return {\r\n      ...state,\r\n      ...payload\r\n    }\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nconst loading = (state = false, { type }) => {\r\n  if (type === TRACKFEATURES_LOAD_REQUEST) {\r\n    return true\r\n  } else if (type === TRACKFEATURES_LOAD_SUCCESS) {\r\n    return false\r\n  }\r\n\r\n  return state\r\n}\r\n\r\nexport default combineReducers({\r\n  loading,\r\n  byID\r\n})\r\n","import { combineReducers } from 'redux'\r\nimport tracks from './tracks'\r\nimport playlists from './playlists'\r\nimport trackFeatures from './trackFeatures'\r\n\r\nexport default combineReducers({\r\n  tracks,\r\n  playlists,\r\n  trackFeatures\r\n})","import { combineReducers } from 'redux'\r\n\r\nimport session from './session'\r\nimport router from './router'\r\nimport message from './message'\r\nimport entities from './entities'\r\n\r\nconst root = combineReducers({\r\n  session,\r\n  message,\r\n  router,\r\n  entities\r\n})\r\n\r\nexport default root","import { set } from '../actions/message'\r\n\r\nconst errorHandler = ({ dispatch }) => next => async action => {\r\n  try {\r\n    return await next(action)\r\n  } catch (err) {\r\n    console.error(err)\r\n    dispatch(set('Could not finish this action because of an error'))\r\n  }\r\n}\r\n\r\nexport default errorHandler\r\n","import { MESSAGE_CLEAR, MESSAGE_SET } from '../constants/actions'\r\n\r\nexport const set = message => ({\r\n  type: MESSAGE_SET,\r\n  payload: message\r\n})\r\n\r\nexport const clear = () => ({\r\n  type: MESSAGE_CLEAR\r\n})\r\n","import { applyMiddleware, compose, createStore } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport root from './reducers'\r\nimport errorHandler from './middleware/error'\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        shouldHotReload: false\r\n      })\r\n    : compose\r\n\r\nconst enhancers = composeEnhancers(applyMiddleware(errorHandler, thunk))\r\n\r\nconst store = createStore(root, enhancers)\r\n\r\nexport default store\r\n","import styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Link = styled.a.attrs(({ external }) => ({\r\n  target: external ? '_blank' : null\r\n}))`\r\n  color: inherit;\r\n\r\n  font-weight: ${p => p.theme.font.bold};\r\n  font-family: ${p => p.theme.font.primary};\r\n  font-size: inherit;\r\n\r\n  text-decoration: none;\r\n\r\n  transition: all 0.1s;\r\n\r\n  border: 0;\r\n  border-radius: 3px;\r\n  \r\n  background: transparent;\r\n\r\n  margin: 0;\r\n  padding: 0;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    \r\n    background: ${p => p.theme.primary};\r\n    color: ${p => p.theme.primaryContrast}\r\n  }\r\n`\r\n\r\nLink.propTypes = {\r\n  external: PropTypes.bool\r\n}\r\n\r\nexport default Link\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Base from '../components/Link'\r\nimport { navigate } from '../actions/router'\r\n\r\nconst Link = ({ as: Component, to, params, navigateTo, ...rest }) => (\r\n  <Component\r\n    as='button'\r\n    onClick={e => {\r\n      e.preventDefault()\r\n      navigateTo(to, params)\r\n    }}\r\n    {...rest}\r\n  />\r\n)\r\n\r\nLink.propTypes = {\r\n  as: PropTypes.object,\r\n  to: PropTypes.string.isRequired,\r\n  params: PropTypes.object,\r\n  navigateTo: PropTypes.func.isRequired\r\n}\r\n\r\nLink.defaultProps = {\r\n  as: Base\r\n}\r\n\r\nconst mapDispatch = dispatch => ({\r\n  navigateTo: (path, params) => dispatch(navigate(path, params))\r\n})\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatch\r\n)(Link)\r\n","import { ROUTER_NAVIGATE } from '../constants/actions'\r\n\r\nexport const navigate = (path, params = {}) => ({\r\n  type: ROUTER_NAVIGATE,\r\n  payload: {\r\n    path,\r\n    params\r\n  }\r\n})\r\n","import styled from 'styled-components'\r\n\r\nconst Paragraph = styled.p`\r\n  margin-bottom: .75rem;\r\n`\r\n\r\nexport default Paragraph\r\n","import React from 'react'\r\nimport { createGlobalStyle, css, ThemeProvider } from 'styled-components'\r\nimport { Reset } from 'styled-reset'\r\nimport { lighten, saturate } from '@wessberg/color'\r\n\r\nconst colors = {\r\n  purple: '#453246',\r\n  red: '#F86254',\r\n  burgundy: '#B04D5D',\r\n  yellow: '#FFD05B',\r\n  white: '#fcfafc',\r\n  black: '#000'\r\n}\r\n\r\nconst theme = {\r\n  primary: colors.red,\r\n  primaryContrast: colors.white,\r\n  primaryLight: lighten(colors.red, 20),\r\n  primaryDark: saturate(lighten(colors.red, -10), -30),\r\n\r\n  background: colors.purple,\r\n\r\n  secondary: colors.red,\r\n  white: colors.white,\r\n  black: colors.black,\r\n  gray: '#4D4646',\r\n  grayLight: '#AF99B0',\r\n  grayLighter: lighten(colors.white, -10),\r\n  grayEvenLighter: saturate(lighten(colors.white, -2), -20),\r\n\r\n  palette: colors,\r\n\r\n  font: {\r\n    primary: '\"Karla\", sans-serif',\r\n    secondary: '\"Rubik\", sans-serif',\r\n\r\n    bold: 700,\r\n\r\n    small: '.8rem',\r\n    regular: '1rem',\r\n    large: '1.2rem',\r\n\r\n    h1: '1.4rem',\r\n    h2: '1.2rem'\r\n  },\r\n\r\n  shadow: 'box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2)'\r\n}\r\n\r\nexport const small = (...args) => css`\r\n  @media (max-width: 800px) {\r\n    ${css(...args)}\r\n  }\r\n`\r\n\r\nconst Global = createGlobalStyle`\r\n  html {\r\n    font-size: 140%;\r\n  }\r\n  \r\n  body {\r\n    background-color: ${p => p.theme.background};\r\n    \r\n    font-family: ${p => p.theme.font.primary};\r\n    line-height: 1.35;\r\n    \r\n    overflow-y: scroll;\r\n  }\r\n  \r\n  ::selection {\r\n    background-color: ${p => p.theme.background};\r\n    color: ${p => p.theme.white};\r\n  }\r\n`\r\n\r\nconst Theme = ({ children }) => (\r\n  <ThemeProvider theme={theme}>\r\n    <React.Fragment>\r\n      <Reset />\r\n      <Global />\r\n      {children}\r\n    </React.Fragment>\r\n  </ThemeProvider>\r\n)\r\n\r\nTheme.propTypes = {}\r\n\r\nexport default Theme\r\n","import styled from 'styled-components'\r\nimport { small } from './Theme'\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 1200px;\r\n\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n\r\n  ${small`\r\n    padding: 1rem;\r\n  `}\r\n`\r\n\r\nexport default Wrapper","const routes = {\r\n  PRIVACY: 'privacy',\r\n  PLAYLISTS: 'playlists',\r\n  LOGIN: 'login',\r\n  SHUFFLE: 'shuffle'\r\n}\r\n\r\nexport default routes","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport Link from './Link'\r\nimport NavLink from '../containers/Link'\r\nimport Paragraph from './Paragraph'\r\nimport Container from './Wrapper'\r\nimport routes from '../constants/routes'\r\n\r\nconst Wrap = styled(Container).attrs({ as: 'footer' })`\r\n  color: ${p => p.theme.grayLight};\r\n  font-size: ${p => p.theme.font.small};\r\n\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-flow: wrap;\r\n  align-items: flex-start;\r\n`\r\n\r\nconst Footer = ({ version }) => (\r\n  <Wrap>\r\n    <div>\r\n      <Paragraph>Shufflify by Tomas ❤</Paragraph>\r\n\r\n      <Paragraph>\r\n        <Link href='https://open.spotify.com/user/myspotfiy' external>\r\n          @myspotfiy\r\n        </Link>{' '}\r\n        on Spotify\r\n        <br />\r\n        <Link href='https://github.com/tomasruud' external>\r\n          @tomasruud\r\n        </Link>{' '}\r\n        on GitHub\r\n      </Paragraph>\r\n\r\n      <NavLink to={routes.PRIVACY}>Privacy</NavLink>\r\n    </div>\r\n\r\n    <div>\r\n      <Paragraph>\r\n        <Link href='https://github.com/tomasruud/shufflify/issues' external>\r\n          Report issues\r\n        </Link>\r\n        <br />\r\n        Version {version}\r\n      </Paragraph>\r\n    </div>\r\n  </Wrap>\r\n)\r\n\r\nFooter.propTypes = {\r\n  version: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Footer\r\n","import { connect } from 'react-redux'\r\nimport Footer from '../components/Footer'\r\n\r\nconst mapState = () => ({\r\n  version: process.env.REACT_APP_VERSION\r\n})\r\n\r\nexport default connect(mapState)(Footer)\r\n","export const token = state => state.session.token\r\n\r\nexport const user = state => state.session.user\r\n\r\nexport const userID = state => user(state).id\r\n\r\nexport const userName = state => user(state).name\r\n\r\nexport const userImage = state => user(state).image\r\n\r\nexport const loading = state => state.session.loading\r\n\r\nexport const hasToken = state => !!token(state)\r\n\r\nexport const authenticated = state => hasToken(state)\r\n","import { parse, stringify } from 'query-string'\r\nimport Client from 'spotify-web-api-js'\r\n\r\nexport class NoAccessTokenAvailableError extends Error {\r\n  constructor(m) {\r\n    super(m)\r\n    this.name = 'NoAccessTokenAvailableError'\r\n  }\r\n}\r\n\r\nexport default class Spotify {\r\n  constructor(token) {\r\n    this.client = new Client()\r\n    this.client.setAccessToken(token)\r\n  }\r\n\r\n  setClient(client) {\r\n    this.client = client\r\n  }\r\n\r\n  static getAuthenticationURL(clientID, redirectURL) {\r\n    const q = stringify({\r\n      redirect_uri: redirectURL,\r\n      client_id: clientID,\r\n      scope: ['playlist-read-private', 'playlist-modify-private'].join(' '),\r\n      response_type: 'token',\r\n      show_dialog: false\r\n    })\r\n\r\n    return `https://accounts.spotify.com/authorize?${q}`\r\n  }\r\n\r\n  static async getAccessToken({ search, hash }) {\r\n    const s = parse(search)\r\n\r\n    if (!!s.error) {\r\n      throw new Error('Authentication error')\r\n    }\r\n\r\n    const h = parse(hash)\r\n\r\n    if (!h.access_token) {\r\n      throw new NoAccessTokenAvailableError('No access token found')\r\n    }\r\n\r\n    return h.access_token\r\n  }\r\n\r\n  async getUser() {\r\n    const u = await this.client.getMe()\r\n\r\n    if (!u) {\r\n      throw new Error('No user found')\r\n    }\r\n\r\n    if (!u.id) {\r\n      throw new Error('User does not have an id')\r\n    }\r\n\r\n    let user = {\r\n      id: u.id,\r\n      name: u.display_name\r\n    }\r\n\r\n    if (u.images && u.images[0] && u.images[0].url) {\r\n      user.image = u.images[0].url\r\n    }\r\n\r\n    return user\r\n  }\r\n\r\n  async getPlaylists() {\r\n    let ps = await this.client.getUserPlaylists({ limit: 50 })\r\n    let l = ps.items\r\n\r\n    while (ps.next) {\r\n      ps = await this.client.getGeneric(ps.next)\r\n\r\n      if (ps.items) {\r\n        l = l.concat(ps.items)\r\n      }\r\n    }\r\n\r\n    return l.map(p => {\r\n      const list = {\r\n        id: p.id,\r\n        ownerID: p.owner.id,\r\n        name: p.name,\r\n        uri: p.uri,\r\n        href: p.href\r\n      }\r\n\r\n      if (p.images && p.images[0] && p.images[0].url) {\r\n        list.image = p.images[0].url\r\n      }\r\n\r\n      return list\r\n    })\r\n  }\r\n\r\n  async getTracks(playlistID) {\r\n    let ts = await this.client.getPlaylistTracks(playlistID, {\r\n      fields: 'items(track(uri,id,name,artists(name),is_local)), next'\r\n    })\r\n\r\n    let l = ts.items\r\n\r\n    while (ts.next) {\r\n      ts = await this.client.getGeneric(ts.next)\r\n\r\n      if (ts.items) {\r\n        l = l.concat(ts.items)\r\n      }\r\n    }\r\n\r\n    return l.map(t => ({\r\n      uri: t.track.uri,\r\n      id: t.track.id,\r\n      name: t.track.name,\r\n      artists: t.track.artists.map(a => a.name),\r\n      local: !!t.track.is_local\r\n    }))\r\n  }\r\n\r\n  async getFeaturesForTracks(trackIDs) {\r\n    let t = [...trackIDs]\r\n    let features = {}\r\n\r\n    while (t.length > 0) {\r\n      const ids = t.splice(0, 100)\r\n\r\n      const { audio_features } = await this.client.getAudioFeaturesForTracks(\r\n        ids\r\n      )\r\n\r\n      if (!audio_features) {\r\n        throw new Error('No audio features provided')\r\n      }\r\n\r\n      features = {\r\n        ...features,\r\n        ...audio_features.reduce((acc, f, i) => {\r\n          if (!f) {\r\n            return acc\r\n          }\r\n\r\n          acc[ids[i]] = {\r\n            acousticness: f.acousticness,\r\n            bpm: f.tempo,\r\n            danceability: f.danceability,\r\n            energy: f.energy,\r\n            instrumentalness: f.instrumentalness,\r\n            key: f.key,\r\n            liveness: f.liveness,\r\n            major: f.mode === 1,\r\n            positivity: f.valence,\r\n            speechiness: f.speechiness\r\n          }\r\n\r\n          return acc\r\n        }, {})\r\n      }\r\n    }\r\n\r\n    return features\r\n  }\r\n\r\n  async moveTrack(playlistId, from, to) {\r\n    const res = await this.client.reorderTracksInPlaylist(playlistId, from, to)\r\n    return res.snapshot_id\r\n  }\r\n}\r\n","export const enabled = true\r\n\r\nconst whitelist = [\r\n  'myspotfiy'\r\n]\r\n\r\nexport const has = username => whitelist.includes(username)","import Spotify, { NoAccessTokenAvailableError } from '../services/spotify'\r\nimport { SESSION_BOOTSTRAP_COMPLETE } from '../constants/actions'\r\nimport * as whitelist from '../constants/whitelist'\r\n\r\nexport const success = (token, user) => ({\r\n  type: SESSION_BOOTSTRAP_COMPLETE,\r\n  payload: {\r\n    token,\r\n    user\r\n  }\r\n})\r\n\r\nexport const authenticate = () => async () => {\r\n  const client = process.env.REACT_APP_SPOTIFY_CLIENT_ID\r\n  const redirect = process.env.REACT_APP_SPOTIFY_REDIRECT\r\n\r\n  window.location = Spotify.getAuthenticationURL(client, redirect)\r\n}\r\n\r\nexport const bootstrap = () => async dispatch => {\r\n  try {\r\n    const { location, history, title } = window\r\n\r\n    const token = await Spotify.getAccessToken(location)\r\n    const client = new Spotify(token)\r\n    const user = await client.getUser()\r\n\r\n    history.replaceState({}, title, location.pathname)\r\n\r\n    if (whitelist.enabled && !whitelist.has(user.id)) {\r\n      throw Error('You are not whitelisted')\r\n    }\r\n\r\n    return dispatch(success(token, user))\r\n  } catch (e) {\r\n    if (e instanceof NoAccessTokenAvailableError) {\r\n      return dispatch(success(null, {}))\r\n    } else {\r\n      throw e\r\n    }\r\n  }\r\n}\r\n","import React, { useMemo } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled, { withTheme } from 'styled-components'\r\n\r\nconst Box = styled.span`\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  display: block;\r\n\r\n  background-color: ${p => p.color};\r\n`\r\n\r\nconst BoxWrap = styled.div`\r\n  width: 1.8rem;\r\n  height: 1.8rem;\r\n\r\n  margin-right: 0.5rem;\r\n\r\n  display: grid;\r\n\r\n  grid-template-columns: 1fr 1fr;\r\n`\r\n\r\nconst Wrap = styled.span`\r\n  font-family: ${p => p.theme.font.primary};\r\n  font-weight: ${p => p.theme.font.bold};\r\n  font-size: ${p => p.theme.font.h1};\r\n  color: ${p => p.theme.black};\r\n\r\n  display: flex;\r\n\r\n  align-items: center;\r\n`\r\n\r\nconst Logo = ({ theme }) => {\r\n  const colors = useMemo(\r\n    () =>\r\n      Object.keys(theme.palette)\r\n        .sort(() => 0.5 - Math.random())\r\n        .map(c => theme.palette[c]),\r\n    [theme]\r\n  )\r\n\r\n  return (\r\n    <Wrap>\r\n      <BoxWrap>\r\n        <Box color={colors[0]} />\r\n        <Box color={colors[1]} />\r\n        <Box color={colors[2]} />\r\n        <Box color={colors[3]} />\r\n      </BoxWrap>\r\n      Shufflify\r\n    </Wrap>\r\n  )\r\n}\r\n\r\nLogo.propTypes = {\r\n  theme: PropTypes.shape({\r\n    palette: PropTypes.object\r\n  }).isRequired\r\n}\r\n\r\nexport default withTheme(Logo)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { small } from './Theme'\r\n\r\nconst Image = styled.img`\r\n  width: 1.5rem;\r\n  height: 1.5rem;\r\n\r\n  border-radius: 100%;\r\n  border: 2px solid ${p => p.theme.grayEvenLighter};\r\n\r\n  margin-right: 0.25rem;\r\n  \r\n  ${small`\r\n    margin-right: 0;\r\n  `}\r\n`\r\n\r\nconst Wrap = styled.span`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  background-color: ${p => p.theme.grayLight};\r\n  color: ${p => p.theme.grayEvenLighter};\r\n\r\n  padding: 0.25rem 0.65rem 0.25rem 0.25rem;\r\n  border-radius: 666rem;\r\n\r\n  ${p => p.theme.shadow};\r\n  \r\n  ${small`\r\n    padding: 0.25rem;\r\n  `}\r\n`\r\n\r\nconst Name = styled.span`\r\n  ${small`\r\n    display: none;\r\n  `}\r\n`\r\n\r\nconst Badge = ({ image, name }) => (\r\n  <Wrap>\r\n    <Image src={image} alt='Profile picture' />\r\n    <Name>{name}</Name>\r\n  </Wrap>\r\n)\r\n\r\nexport default Badge\r\n","import { connect } from 'react-redux'\r\nimport Badge from '../components/Badge'\r\nimport { userImage, userName } from '../selectors/session'\r\n\r\nconst mapState = state => ({\r\n  image: userImage(state),\r\n  name: userName(state)\r\n})\r\n\r\nexport default connect(mapState)(Badge)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport Logo from './Logo'\r\nimport NavLink from '../containers/Link'\r\nimport Link from './Link'\r\nimport UserBadge from '../containers/UserBadge'\r\n\r\nconst Wrapper = styled.header`\r\n  color: ${p => p.theme.gray};\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  flex-flow: wrap;\r\n`\r\n\r\nconst Nav = ({ isLoading, isAuthenticated, authenticate }) => (\r\n  <Wrapper>\r\n    <NavLink to='' style={{ background: 'transparent' }}>\r\n      <Logo />\r\n    </NavLink>\r\n\r\n    {isLoading ? (\r\n      null\r\n    ) : isAuthenticated ? (\r\n      <UserBadge />\r\n    ) : (\r\n      <Link as='button' onClick={() => authenticate()}>\r\n        Sign in\r\n      </Link>\r\n    )}\r\n  </Wrapper>\r\n)\r\n\r\nNav.propTypes = {}\r\n\r\nexport default Nav\r\n","import { connect } from 'react-redux'\r\nimport { authenticated, loading } from '../selectors/session'\r\nimport { authenticate } from '../actions/session'\r\nimport Nav from '../components/Nav'\r\n\r\nconst mapState = state => ({\r\n  isAuthenticated: authenticated(state),\r\n  isLoading: loading(state),\r\n})\r\n\r\nconst mapDispatch = dispatch => ({\r\n  authenticate: () => dispatch(authenticate())\r\n})\r\n\r\nexport default connect(mapState, mapDispatch)(Nav)\r\n","export const params = state => state.router.params\r\n\r\nexport const path = state => state.router.path","import styled from 'styled-components'\r\n\r\nconst Content = styled.div`\r\n  max-width: 600px;\r\n`\r\n\r\nexport default Content","import styled from 'styled-components'\r\n\r\nexport const Heading1 = styled.h1`\r\n  font-family: ${p => p.theme.font.secondary};\r\n  font-weight: 700;\r\n  font-size: ${p => p.theme.font.h1};\r\n  \r\n  color: ${p => p.theme.black};\r\n  \r\n  margin-bottom: .5rem;\r\n`\r\n\r\nexport const Heading2 = styled(Heading1).attrs({ as: 'h2' })`\r\n  font-size: ${p => p.theme.font.h2};\r\n`\r\n\r\nexport default Heading1","import React from 'react'\r\nimport Content from './Content'\r\nimport Paragraph from './Paragraph'\r\nimport Title from './Title'\r\n\r\nconst Privacy = () => (\r\n  <Content>\r\n    <Title>Privacy</Title>\r\n\r\n    <Paragraph>Shufflify does not store any of your data anywhere.</Paragraph>\r\n\r\n    <Paragraph>\r\n      When you authenticate with Spotify, you receive a unique code that is\r\n      stored in your browser as long as you are using the app. Once you refresh\r\n      the page, your code is no longer stored, and you will have to authenticate\r\n      again.\r\n    </Paragraph>\r\n  </Content>\r\n)\r\n\r\nexport default Privacy\r\n","import styled from 'styled-components'\r\n\r\nconst Button = styled.button`\r\n  padding: 0.75rem 1rem;\r\n  margin: 0;\r\n\r\n  border-radius: 666rem;\r\n  border: 0;\r\n\r\n  font-weight: ${p => p.theme.font.bold};\r\n  font-size: ${p => p.theme.font.regular};\r\n  font-family: ${p => p.theme.font.primary};\r\n\r\n  color: ${p => p.theme.primaryContrast};\r\n  background-color: ${p => p.theme.primary};\r\n  \r\n  display: inline-block;\r\n  text-decoration: none;\r\n\r\n  ${p => p.theme.shadow};\r\n\r\n  transition: all .1s;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n    \r\n    background-color: ${p => p.theme.primaryDark};\r\n  }\r\n\r\n  :active,\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${p => p.theme.white},\r\n      0 0 0 4px ${p => p.theme.primaryLight};\r\n  }\r\n`\r\n\r\nexport const SecondaryButton = styled(Button)`\r\n  color: ${p => p.theme.black};\r\n  background-color: ${p => p.theme.white};\r\n  \r\n  :hover {\r\n    color: ${p => p.theme.white};\r\n    background-color: ${p => p.theme.primary};\r\n  }\r\n`\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Content from './Content'\r\nimport Paragraph from './Paragraph'\r\nimport Button from './Button'\r\nimport Title from './Title'\r\n\r\nconst Login = ({ authenticate }) => (\r\n  <Content>\r\n    <Title>Make your playlists more interesting</Title>\r\n\r\n    <Paragraph>\r\n      Shufflify allows you to shuffle and order your Spotify playlists in new\r\n      and exciting ways.{' '}\r\n    </Paragraph>\r\n    <Paragraph>\r\n      Continue by clicking the button below, and allow access to your playlists\r\n      to start shuffling!\r\n    </Paragraph>\r\n\r\n    <Button onClick={() => authenticate()}>Sign in with Spotify</Button>\r\n  </Content>\r\n)\r\n\r\nLogin.propTypes = {\r\n  authenticate: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Login\r\n","import { connect } from 'react-redux'\r\nimport { authenticate } from '../actions/session'\r\nimport Login from '../components/Login'\r\n\r\nconst mapDispatch = dispatch => ({\r\n  authenticate: () => dispatch(authenticate())\r\n})\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatch\r\n)(Login)\r\n","import { createSelector } from 'reselect'\r\nimport { userID } from './session'\r\n\r\nexport const playlists = state => Object.values(state.entities.playlists.byURI)\r\n\r\nexport const loading = state => state.entities.playlists.loading\r\n\r\nexport const loaded = state => playlists(state).length > 0\r\n\r\nexport const byURI = (state, uri) => state.entities.playlists.byURI[uri]\r\n\r\nexport const search = state => state.entities.playlists.search\r\n\r\nexport const visiblePlaylists = createSelector(\r\n  [search, playlists, userID],\r\n  (search, playlists, userID) => {\r\n    search = search.toLowerCase()\r\n\r\n    playlists = playlists.filter(\r\n      p => !search || (p.name && p.name.toLowerCase().includes(search))\r\n    )\r\n\r\n    return playlists.filter(p => p.ownerID === userID)\r\n  }\r\n)\r\n","import Types from 'prop-types'\r\n\r\nconst playlist = Types.shape({\r\n  uri: Types.string.isRequired,\r\n  id: Types.string.isRequired,\r\n  ownerID: Types.string.isRequired,\r\n  name: Types.string.isRequired,\r\n  href: Types.string.isRequired,\r\n  image: Types.string,\r\n})\r\n\r\nexport default playlist","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\nimport routes from '../constants/routes'\r\nimport Link from '../containers/Link'\r\nimport playlist from '../models/playlist'\r\nimport { SecondaryButton } from './Button'\r\n\r\nconst List = styled.ul`\r\n  list-style-type: none;\r\n  margin: 0;\r\n  padding: 0;\r\n\r\n  display: flex;\r\n  flex-flow: wrap;\r\n`\r\n\r\nconst Item = styled.li`\r\n  margin: 4px;\r\n`\r\n\r\nconst PlaylistList = ({ playlists, ...rest }) => (\r\n  <List {...rest}>\r\n    {playlists.map(p => (\r\n      <Item key={p.uri}>\r\n        <SecondaryButton as={Link} to={routes.SHUFFLE} params={{ uri: p.uri }}>\r\n          {p.name}\r\n        </SecondaryButton>\r\n      </Item>\r\n    ))}\r\n  </List>\r\n)\r\n\r\nPlaylistList.propTypes = {\r\n  playlists: PropTypes.arrayOf(playlist).isRequired\r\n}\r\n\r\nPlaylistList.defaultProps = {\r\n  playlists: []\r\n}\r\n\r\nexport default PlaylistList\r\n","import { connect } from 'react-redux'\r\nimport { visiblePlaylists } from '../selectors/playlists'\r\nimport PlaylistList from '../components/PlaylistList'\r\n\r\nconst mapState = state => ({\r\n  playlists: visiblePlaylists(state)\r\n})\r\n\r\nexport default connect(mapState)(PlaylistList)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Emoji = ({ emoji, alt }) => (\r\n  <span role='img' aria-label={alt}>\r\n    {emoji}\r\n  </span>\r\n)\r\n\r\nEmoji.propTypes = {\r\n  emoji: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Emoji\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport Emoji from './Emoji'\r\n\r\nconst Wrap = styled.div`\r\n  display: flex;\r\n  \r\n  max-width: 400px;\r\n\r\n  background-color: ${p => p.theme.white};\r\n  font-size: ${p => p.theme.font.small};\r\n\r\n  border-radius: 666rem;\r\n\r\n  ${p => p.theme.shadow};\r\n`\r\n\r\nconst Button = styled.button`\r\n  border: 0;\r\n  border-top-right-radius: 666rem;\r\n  border-bottom-right-radius: 666rem;\r\n\r\n  background: transparent;\r\n\r\n  padding: 0.75rem;\r\n\r\n  font-size: inherit;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n\r\n  :active,\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${p => p.theme.white},\r\n      0 0 0 4px ${p => p.theme.primaryLight};\r\n  }\r\n`\r\n\r\nconst Input = styled.input`\r\n  border: 0;\r\n  border-top-left-radius: 666rem;\r\n  border-bottom-left-radius: 666rem;\r\n\r\n  background-color: transparent;\r\n\r\n  padding: 0.75rem;\r\n\r\n  font-size: inherit;\r\n  \r\n  width: 100%;\r\n\r\n  :active,\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${p => p.theme.white},\r\n      0 0 0 4px ${p => p.theme.primaryLight};\r\n  }\r\n`\r\n\r\nconst Filter = ({ setFilter, filter, ...rest }) => (\r\n  <Wrap>\r\n    <Input\r\n      type='text'\r\n      onChange={e => setFilter(e.target.value)}\r\n      value={filter}\r\n      {...rest}\r\n    />\r\n    <Button\r\n      onClick={() => setFilter('')}\r\n      disabled={filter === ''}\r\n      ariaLabel='Clear'\r\n    >\r\n      <Emoji emoji='❌' alt='Clear' />\r\n    </Button>\r\n  </Wrap>\r\n)\r\n\r\nexport default Filter\r\n","import React from 'react'\r\nimport styled, { keyframes } from 'styled-components'\r\n\r\nconst animation = keyframes`\r\n  0% {\r\n   transform: scale(0);\r\n  }\r\n  \r\n  50% {\r\n  transform: scale(1);\r\n  }\r\n  \r\n  100% {\r\n  transform: scale(0);\r\n  }\r\n`\r\n\r\nconst Ball = styled.div.attrs(({ offset }) => ({\r\n  offset: offset || 0\r\n}))`\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  border-radius: 100%;\r\n\r\n  background-color: ${p => p.theme.secondary};\r\n  opacity: 0.8;\r\n\r\n  animation: ${animation} 1.5s ${p => p.offset}s\r\n    cubic-bezier(0.53, 0.06, 0.5, 0.95) infinite;\r\n\r\n  transform: scale(0);\r\n\r\n  position: absolute;\r\n`\r\n\r\nconst Wrap = styled.div`\r\n  display: block;\r\n\r\n  position: relative;\r\n\r\n  width: 2rem;\r\n  height: 2rem;\r\n`\r\n\r\nconst Loader = ({ ...props }) => (\r\n  <Wrap {...props}>\r\n    <Ball />\r\n    <Ball offset={0.75} />\r\n  </Wrap>\r\n)\r\n\r\nexport default Loader\r\n","import React, { useLayoutEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport VisiblePlaylists from '../containers/VisiblePlaylists'\r\nimport Title from './Title'\r\nimport Filter from './Filter'\r\nimport Paragraph from './Paragraph'\r\nimport Loader from './Loader'\r\n\r\nconst Playlists = ({ isLoading, loadPlaylists, updateSearch, search }) => {\r\n  useLayoutEffect(() => {\r\n    loadPlaylists()\r\n  }, [loadPlaylists])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Title>Select playlist to shuffle</Title>\r\n\r\n      <Paragraph>\r\n        Click on the name of a playlist to enter shuffle-mode.\r\n      </Paragraph>\r\n\r\n      <Filter\r\n        setFilter={updateSearch}\r\n        filter={search}\r\n        placeholder='Search by name'\r\n      />\r\n\r\n      {isLoading ? (\r\n        <Loader style={{ marginTop: '1rem' }} />\r\n      ) : (\r\n        <VisiblePlaylists style={{ marginTop: '1rem' }} />\r\n      )}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nPlaylists.propTypes = {\r\n  isLoading: PropTypes.bool\r\n}\r\n\r\nexport default Playlists\r\n","import { connect } from 'react-redux'\r\nimport { load, setSearch } from '../actions/playlists'\r\nimport { loading, search } from '../selectors/playlists'\r\nimport Playlists from '../components/Playlists'\r\n\r\nconst mapDispatch = dispatch => ({\r\n  loadPlaylists: () => dispatch(load()),\r\n  updateSearch: search => dispatch(setSearch(search))\r\n})\r\n\r\nconst mapState = state => ({\r\n  isLoading: loading(state),\r\n  search: search(state)\r\n})\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Playlists)\r\n","import { token } from '../selectors/session'\r\nimport Spotify from '../services/spotify'\r\nimport {\r\n  PLAYLISTS_LOAD_REQUEST,\r\n  PLAYLISTS_LOAD_SUCCESS,\r\n  PLAYLISTS_SEARCH_SET\r\n} from '../constants/actions'\r\nimport { loaded } from '../selectors/playlists'\r\n\r\nexport const setSearch = search => ({\r\n  type: PLAYLISTS_SEARCH_SET,\r\n  payload: search\r\n})\r\n\r\nexport const load = () => async (dispatch, getState) => {\r\n  if (loaded(getState())) {\r\n    return null\r\n  }\r\n\r\n  dispatch({\r\n    type: PLAYLISTS_LOAD_REQUEST\r\n  })\r\n\r\n  const t = token(getState())\r\n\r\n  const client = new Spotify(t)\r\n  const items = await client.getPlaylists()\r\n\r\n  return dispatch({\r\n    type: PLAYLISTS_LOAD_SUCCESS,\r\n    payload: items\r\n  })\r\n}\r\n","import { byURI as playlistByURI } from './playlists'\r\n\r\nexport const byURI = (state, URI) => state.entities.tracks.byURI[URI]\r\n\r\nexport const byPlaylistURI = (state, playlistURI) => {\r\n  const list = playlistByURI(state, playlistURI)\r\n\r\n  if (!list.tracks) {\r\n    return undefined\r\n  }\r\n\r\n  return list.tracks.map(uri => byURI(state, uri))\r\n}\r\n\r\nexport const URIbyID = (state, ID) => state.entities.tracks.URIbyID[ID]\r\n\r\nexport const byID = (state, ID) => byURI(state, URIbyID(state, ID))\r\n\r\nexport const loading = state => state.entities.tracks.loading\r\n","export const random = arr => {\r\n  let shuf = [...arr.keys()]\r\n\r\n  for (let i = arr.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1))\r\n    ;[shuf[i], shuf[j]] = [shuf[j], shuf[i]]\r\n  }\r\n\r\n  return shuf\r\n}\r\n\r\nexport const scatter = (arr, by) => []\r\n\r\nexport const risePeakResolve = (arr, by) => []\r\n\r\nexport const ascending = (arr, by) => []\r\n\r\nexport const descending = (arr, by) => ascending(arr, by).reverse()\r\n\r\nexport const camelot = arr => []\r\n","import {\r\n  ascending,\r\n  camelot,\r\n  random,\r\n  risePeakResolve,\r\n  scatter\r\n} from '../services/shuffler'\r\n\r\nclass Algorithm {\r\n  constructor(display, description, func, opts = false) {\r\n    this.display = display\r\n    this.description = description\r\n    this.func = func\r\n    this.opts = opts\r\n  }\r\n\r\n  hasOptions() {\r\n    return !!this.opts\r\n  }\r\n}\r\n\r\nconst all = {\r\n  scatter: new Algorithm(\r\n    'Scatter',\r\n    'Distributes tracks evenly across the playlist based on the selected field. This creates what seems like a more randomized playlist than by just randomizing track order.',\r\n    scatter,\r\n    [\r\n      'energy',\r\n      'danceability',\r\n      'bpm',\r\n      'acousticness',\r\n      'instrumentalness',\r\n      'liveness',\r\n      'positivity',\r\n      'speechiness',\r\n      'key'\r\n    ]\r\n  ),\r\n\r\n  random: new Algorithm(\r\n    'Random',\r\n    'Takes all tracks and places them at random locations. This is the most random shuffling algorithm, but may produce results that does not seem too random.',\r\n    random\r\n  ),\r\n\r\n  risePeakResolve: new Algorithm(\r\n    'Hollywood',\r\n    'Tries to order tracks by the selected field so that is starts at a low value and increases until reaching a climax, before returning back down at the end.',\r\n    risePeakResolve,\r\n    [\r\n      'energy',\r\n      'danceability',\r\n      'bpm',\r\n      'acousticness',\r\n      'instrumentalness',\r\n      'liveness',\r\n      'positivity',\r\n      'speechiness'\r\n    ]\r\n  ),\r\n\r\n  camelot: new Algorithm(\r\n    'Camelot',\r\n    'Shuffles the playlist according to the Camelot Wheel, so there are noe harsh changes in key in the mix. Works best for playlists with more tracks.',\r\n    camelot\r\n  ),\r\n\r\n  ascending: new Algorithm(\r\n    'Ascend',\r\n    'Starts at the lowest value and just keeps rising. Good for a get-psyched-mix.',\r\n    ascending,\r\n    [\r\n      'energy',\r\n      'danceability',\r\n      'bpm',\r\n      'acousticness',\r\n      'instrumentalness',\r\n      'liveness',\r\n      'positivity',\r\n      'speechiness'\r\n    ]\r\n  )\r\n}\r\n\r\nexport default all\r\n","import Types from 'prop-types'\r\n\r\nconst track = Types.shape({\r\n  uri: Types.string.isRequired,\r\n  id: Types.string,\r\n  name: Types.string.isRequired,\r\n  artists: Types.arrayOf(Types.string).isRequired,\r\n  local: Types.bool\r\n})\r\n\r\nexport default track","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport track from '../models/track'\r\n\r\nconst Table = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  flex: 1 1 auto;\r\n\r\n  width: 100%;\r\n\r\n  font-size: ${p => p.theme.font.small};\r\n`\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n\r\n  width: 100%;\r\n  padding-bottom: 0.5rem;\r\n  margin-bottom: 0.5rem;\r\n  border-bottom: 1px solid ${p => p.theme.grayLighter};\r\n`\r\n\r\nconst Cell = styled.div`\r\n  display: block;\r\n  flex-flow: row nowrap;\r\n  flex-grow: 1;\r\n  flex-basis: 0;\r\n\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n\r\n  :not(:last-child) {\r\n    margin-right: 1rem;\r\n  }\r\n`\r\n\r\nconst Title = styled(Cell)`\r\n  text-transform: uppercase;\r\n  color: ${p => p.theme.grayLight};\r\n`\r\n\r\nconst TrackList = ({ tracks }) => (\r\n  <Table>\r\n    <Row>\r\n      <Title>Title</Title>\r\n      <Title>Artist</Title>\r\n    </Row>\r\n    {!!tracks &&\r\n      tracks.map((t, i) => (\r\n        <Row key={'' + t.uri + i}>\r\n          <Cell>{t.name}</Cell>\r\n          <Cell>{t.artists.join(', ')}</Cell>\r\n        </Row>\r\n      ))}\r\n  </Table>\r\n)\r\n\r\nTrackList.propTypes = {\r\n  tracks: PropTypes.arrayOf(track).isRequired\r\n}\r\n\r\nTrackList.defaultProps = {\r\n  tracks: []\r\n}\r\n\r\nexport default TrackList\r\n","import { connect } from 'react-redux'\r\nimport TrackList from '../components/TrackList'\r\nimport { byPlaylistURI } from '../selectors/tracks'\r\nimport { params } from '../selectors/router'\r\n\r\nconst mapState = state => ({\r\n  tracks: byPlaylistURI(state, params(state).uri)\r\n})\r\n\r\nexport default connect(mapState)(TrackList)\r\n","import React, { useLayoutEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\nimport playlistType from '../models/playlist'\r\nimport algorithms from '../constants/algorithms'\r\nimport routes from '../constants/routes'\r\nimport VisibleTracks from '../containers/VisibleTracks'\r\nimport Link from '../containers/Link'\r\nimport Title, { Heading2 } from './Title'\r\nimport Loader from './Loader'\r\nimport Paragraph from './Paragraph'\r\n\r\nconst Select = styled.select`\r\n  border: 0;\r\n  border-radius: 666rem;\r\n\r\n  font-size: ${p => p.theme.font.regular};\r\n\r\n  padding: 0.5rem;\r\n  margin: 0;\r\n\r\n  ${p => p.theme.shadow};\r\n  \r\n  color: ${p => p.value === '' ? p.theme.grayLight : p.theme.gray};\r\n  \r\n  > option[disabled] {\r\n    color: ${p => p.theme.grayLight};\r\n  }\r\n  \r\n  > option {\r\n    color: ${p => p.theme.gray};\r\n  }\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n  \r\n  :active,\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${p => p.theme.white},\r\n      0 0 0 4px ${p => p.theme.primaryLight};\r\n  }\r\n`\r\n\r\nconst Back = styled(Link)`\r\n  font-size: ${p => p.theme.font.small};\r\n  text-transform: uppercase;\r\n  \r\n  margin-bottom: 2rem;\r\n`\r\n\r\nconst Shuffler = ({ playlist, isLoading, loadTracks }) => {\r\n  useLayoutEffect(() => {\r\n    if (!playlist.tracks) {\r\n      loadTracks(playlist.uri)\r\n    }\r\n  }, [loadTracks, playlist])\r\n\r\n  const [type, setType] = useState('')\r\n  const [field, setField] = useState('')\r\n\r\n  const algoChange = e => {\r\n    setType(e.target.value)\r\n    setField('')\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Back to={routes.PLAYLISTS}>&laquo; Back to overview</Back>\r\n\r\n      <Title>{playlist.name}</Title>\r\n\r\n      <Paragraph>\r\n        Select a shuffle strategy from the dropdown below.\r\n      </Paragraph>\r\n\r\n      <Select value={type} onChange={algoChange}>\r\n        <option disabled={true} value=''>Strategy</option>\r\n        {Object.keys(algorithms).map(k => (\r\n          <option value={k}>{algorithms[k].display}</option>\r\n        ))}\r\n      </Select>\r\n      {!!algorithms[type] && algorithms[type].hasOptions() && (\r\n        <Select value={field} onChange={e => setField(e.target.value)}>\r\n          <option disabled={true} value=''>- Select field -</option>\r\n          {algorithms[type].opts.map(o => (\r\n            <option value={o}>{o.toLowerCase()}</option>\r\n          ))}\r\n        </Select>\r\n      )}\r\n\r\n      <Heading2>Original order</Heading2>\r\n      {isLoading ? <Loader /> : <VisibleTracks />}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nShuffler.propTypes = {\r\n  playlist: playlistType.isRequired,\r\n  isLoading: PropTypes.bool,\r\n  loadTracks: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Shuffler\r\n","import { connect } from 'react-redux'\r\nimport * as trackActions from '../actions/tracks'\r\nimport * as playlists from '../selectors/playlists'\r\nimport * as tracks from '../selectors/tracks'\r\nimport * as router from '../selectors/router'\r\nimport Shuffler from '../components/Shuffler'\r\n\r\nconst mapDispatch = dispatch => ({\r\n  loadTracks: playlistURI => dispatch(trackActions.load(playlistURI))\r\n})\r\n\r\nconst mapState = state => ({\r\n  playlist: playlists.byURI(state, router.params(state).uri),\r\n  isLoading: tracks.loading(state)\r\n})\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Shuffler)\r\n","import { token } from '../selectors/session'\r\nimport Spotify from '../services/spotify'\r\nimport { TRACKS_LOAD_REQUEST, TRACKS_LOAD_SUCCESS } from '../constants/actions'\r\nimport { byURI } from '../selectors/playlists'\r\n\r\nexport const load = playlistURI => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: TRACKS_LOAD_REQUEST\r\n  })\r\n\r\n  const id = byURI(getState(), playlistURI).id\r\n  const t = token(getState())\r\n\r\n  const client = new Spotify(t)\r\n  const tracks = await client.getTracks(id)\r\n\r\n  return dispatch({\r\n    type: TRACKS_LOAD_SUCCESS,\r\n    payload: {\r\n      playlistURI,\r\n      tracks\r\n    }\r\n  })\r\n}\r\n","import React, { useLayoutEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport routes from '../constants/routes'\r\nimport { path } from '../selectors/router'\r\nimport { authenticated } from '../selectors/session'\r\nimport { authenticate, bootstrap } from '../actions/session'\r\nimport Privacy from '../components/Privacy'\r\n\r\nimport Login from './Login'\r\nimport Playlists from './Playlists'\r\nimport Shuffler from './Shuffler'\r\n\r\nconst Router = ({ path, isAuthenticated, bootstrap }) => {\r\n  useLayoutEffect(() => {\r\n    if (!isAuthenticated) {\r\n      bootstrap()\r\n    }\r\n  }, [bootstrap, isAuthenticated])\r\n\r\n  if (path === routes.PRIVACY) {\r\n    return <Privacy />\r\n  }\r\n\r\n  if (isAuthenticated) {\r\n    switch (path) {\r\n      case routes.SHUFFLE:\r\n        return <Shuffler />\r\n\r\n      case routes.PLAYLISTS:\r\n      default:\r\n        return <Playlists />\r\n    }\r\n  }\r\n\r\n  return <Login />\r\n}\r\n\r\nconst mapState = state => ({\r\n  path: path(state),\r\n  isAuthenticated: authenticated(state)\r\n})\r\n\r\nconst mapDispatch = dispatch => ({\r\n  bootstrap: () => dispatch(bootstrap()),\r\n  authenticate: () => dispatch(authenticate())\r\n})\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Router)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Wrapper = styled.div`\r\n  color: ${p => p.theme.white};\r\n  background-color: ${p => p.theme.secondary};\r\n  \r\n  padding: 0.75rem;\r\n\r\n  ${p => p.theme.shadow};\r\n`\r\n\r\nconst Close = styled.button`\r\n  border: 0;\r\n  background: transparent;\r\n  \r\n  color: inherit;\r\n\r\n  float: right;\r\n\r\n  vertical-align: middle;\r\n  font-size: 1rem;\r\n\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n  \r\n  :active,\r\n  :focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${p => p.theme.secondary},\r\n      0 0 0 4px ${p => p.theme.primaryLight};\r\n  }\r\n`\r\n\r\nconst Message = ({ children, onClear, ...rest }) => (\r\n  <Wrapper {...rest}>\r\n    {children}\r\n    <Close onClick={() => onClear()} ariaLabel='Close'>x</Close>\r\n  </Wrapper>\r\n)\r\n\r\nMessage.propTypes = {}\r\n\r\nexport default Message\r\n","export const hasMessage = state => !!state.message.message\r\n\r\nexport const message = state => state.message.message","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Alert from '../components/Message'\r\nimport { hasMessage, message } from '../selectors/message'\r\nimport { clear } from '../actions/message'\r\n\r\nconst Notice = ({ text, isSet, clear, ...rest }) => {\r\n  if (isSet) {\r\n    return <Alert onClear={clear} {...rest}>{text}</Alert>\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nconst mapState = state => ({\r\n  text: message(state),\r\n  isSet: hasMessage(state)\r\n})\r\n\r\nconst mapDispatch = dispatch => ({\r\n  clear: () => dispatch(clear())\r\n})\r\n\r\nexport default connect(\r\n  mapState,\r\n  mapDispatch\r\n)(Notice)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport Footer from '../containers/Footer'\r\nimport Nav from '../containers/Nav'\r\nimport Router from '../containers/Router'\r\nimport Notice from '../containers/Notice'\r\n\r\nimport Container from './Wrapper'\r\nimport Theme from './Theme'\r\n\r\nconst Wrapper = styled.div`\r\n  background-color: ${p => p.theme.white};\r\n  ${p => p.theme.shadow};\r\n`\r\n\r\nconst Content = styled.main`\r\n  margin: 3rem 0;\r\n\r\n  color: ${p => p.theme.gray};\r\n`\r\n\r\nconst App = () => (\r\n  <Theme>\r\n    <Wrapper>\r\n      <Container>\r\n        <Nav />\r\n        <Content>\r\n          <Notice style={{ marginBottom: '1rem' }} />\r\n          <Router />\r\n        </Content>\r\n      </Container>\r\n    </Wrapper>\r\n    <Footer />\r\n  </Theme>\r\n)\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './store'\nimport App from './components/App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('shufflify')\n)\n\nif (module.hot) {\n  module.hot.accept()\n}"],"sourceRoot":""}